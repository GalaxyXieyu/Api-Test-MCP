name: Carousels 轮播图模块
description: 测试轮播图的增删改查功能
steps:
  - id: login_admin
    path: /api/auth/login
    method: POST
    headers:
      Content-Type: application/json
    data:
      username: admin
      password: password
    assert:
      - type: status_code
        expected: 200

  - id: get_carousels_list
    path: /api/carousels
    method: GET
    assert:
      - type: status_code
        expected: 200
      - type: field
        field: success
        expected: true

  - id: create_carousel
    path: /api/carousels
    method: POST
    headers:
      Authorization: "Bearer {{ login_admin.data.token }}"
      Content-Type: application/json
    data:
      title: Test Carousel
      image_url: https://example.com/image.jpg
      link_url: https://example.com
      sort_order: 1
      is_active: true
    assert:
      - type: status_code
        expected: 200
      - type: field
        field: success
        expected: true
      - type: field
        field: data.id
        expected_exists: true

  - id: update_carousel
    path: /api/carousels/{{ create_carousel.data.data.id }}
    method: PUT
    headers:
      Authorization: "Bearer {{ login_admin.data.token }}"
      Content-Type: application/json
    data:
      title: Updated Carousel Title
      sort_order: 2
    assert:
      - type: status_code
        expected: 200
      - type: field
        field: success
        expected: true

  - id: delete_carousel
    path: /api/carousels/{{ create_carousel.data.data.id }}
    method: DELETE
    headers:
      Authorization: "Bearer {{ login_admin.data.token }}"
    assert:
      - type: status_code
        expected: 200
      - type: field
        field: success
        expected: true

  - id: create_carousel_unauthorized
    path: /api/carousels
    method: POST
    headers:
      Content-Type: application/json
    data:
      title: Unauthorized Carousel
    assert:
      - type: status_code
        expected: 401
