name: Featured Products 精选产品模块
description: 测试精选产品管理功能
steps:
  - id: login_admin
    path: /api/auth/login
    method: POST
    headers:
      Content-Type: application/json
    data:
      username: admin
      password: password
    assert:
      - type: status_code
        expected: 200

  - id: get_featured_products_list
    path: /api/featured-products
    method: GET
    headers:
      Authorization: "Bearer {{ login_admin.data.token }}"
    assert:
      - type: status_code
        expected: 200
      - type: field
        field: success
        expected: true

  - id: create_featured_product
    path: /api/featured-products
    method: POST
    headers:
      Authorization: "Bearer {{ login_admin.data.token }}"
      Content-Type: application/json
    data:
      product_id: 1
      sort_order: 1
    assert:
      - type: status_code
        expected: 200
      - type: field
        field: success
        expected: true
      - type: field
        field: data.id
        expected_exists: true

  - id: update_featured_product
    path: /api/featured-products/{{ create_featured_product.data.data.id }}
    method: PUT
    headers:
      Authorization: "Bearer {{ login_admin.data.token }}"
      Content-Type: application/json
    data:
      sort_order: 5
    assert:
      - type: status_code
        expected: 200
      - type: field
        field: success
        expected: true

  - id: delete_featured_product
    path: /api/featured-products/{{ create_featured_product.data.data.id }}
    method: DELETE
    headers:
      Authorization: "Bearer {{ login_admin.data.token }}"
    assert:
      - type: status_code
        expected: 200
      - type: field
        field: success
        expected: true

  - id: get_featured_products_public
    path: /api/products/featured
    method: GET
    assert:
      - type: status_code
        expected: 200

  - id: create_featured_unauthorized
    path: /api/featured-products
    method: POST
    headers:
      Content-Type: application/json
    data:
      product_id: 1
    assert:
      - type: status_code
        expected: 401
